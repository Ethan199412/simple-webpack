<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function bundle(graph) {
            console.log('[p0] p0',graph)
            // 重写require函数
            function require(moduleId) {
                console.log('[p0.5]',moduleId) // ./src/index.js
                let code = graph[moduleId].code
                console.log('[p1] code',code)
                eval(code)
            }
            // 从入口文件开始执行
            require('./src/index.js')
        }
        bundle({
            './src/index.js': {
                dependecies: { './hello.js': './src/hello.js' },
                code: '"use strict";\n\nvar _hello = require("./hello.js");\n\ndocument.write((0, _hello.say)("webpack"));'
            },
            './src/hello.js': {
                dependecies: {},
                code:
                    '"use strict";\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.say = say;\n\nfunction say(name) {\n  return "hello ".concat(name);\n}'
            }
        })

    </script>
</body>

</html>